<!Doctype html>

<script type="text/javascript">
		
		/**
			注意： 
				   1.   Promise里面的代码会异步执行，
						setTimeout 时间到达后执行，
						两者同步使用，相当于是 两次异步哦
						
				
					
				   2.   then方法
						（1） then 方法可以接受上一个 resolve 传的参数 
						（2） then 也可以返回一个值，返回 一个普通值的时候，
								
								就相当于 resolve 传参数一样
								//但这里没有使用 Promise 对象
						
						（3） //但是，如果 then 中返回的是一个 Promise 对象，
							  //那么下一个 then 将相当于对这个返回的 Promise 进行操作，
							  //这一点从刚才的计时器的例子中可以看出来。

								就是说在 then 中返回了 " return  Promise " 才会与后面的串行
								
								就是说在 then 中不返回 " Promise " 就会与后面的并行
					
						
				   3.   then 的构造函数可以接收前面 resolve  传的参数
						 
						//==================
						reject : 如果调用的是   reject，F12的Console会抛出红色的错误
						使用 catch 函数捕获
						
						//  throw "An error";的也可以捕获
						
						
							
				   4.   Promise 构建参数为function的参数，才有 resolve,reject 
								//也就是起始函数
								
				   5.   多次的异步的场景，Promise 的构建方法内的业务逻辑执行完之后，
						必须调用resolve,才会继续执行。
						
						而且如果，业务代码中有setTimeout,那就必须放在 setTimeout 的业务处理完之后，因为它也是异步的
						setTimeout(function(){
							console.log("xxxxxxx");
							resolve();//必须放里面
						},1000);
						
		*/
		
		new Promise(function(resolve,reject){
		
		
			setTimeout(function(){
				console.log("first");
				resolve("liheng");
			},1000);
			
			
		}).then(function(xx){
				
			console.log(xx);
			return new Promise(function(resolve,reject){
			
			
				setTimeout(function(){
					console.log("second");
					resolve();
				},4000);
				
			});
			
				
		}).then( function(){
				return new Promise(function(resolve,reject){
					setTimeout(function(){
						console.log("xxxxxxx");
						resolve();
					},1000);
					
				});
				
		}).then(function(){
		//	return new Promise(function(resolve,reject){  //不使用 Promise 相当于同步执行， "fourth"会先于 "thrid" 输出 
				setTimeout(function(){
				 	console.log("thrid");
		//			resolve();
			  	},3000);
		//	});
		})
		.then(function(){ //同步
		
				console.log("fourth");
				
		}).finally(function () {  //同步
		
			console.log("_________________________xxxxxxxxxxxxxxxxxxxxxxxxxxxx");
			console.log("End");
			
		});
		;
 
</script>

<html>
		 
</html>	

